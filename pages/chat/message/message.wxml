<view class="product-display" bindtap="showProductDetail">
    <view class="product-wrapper">
      <image class="product-image" src="{{item.image_url[0]}}" mode="aspectFill"></image>
      <view class="info-right">
        <view class="product-info">
          <text class="product-name">{{item.book_name}}</text>
          <text class="product-price">Ôø•{{item.book_price}}</text>
        </view>
        <view class='detail'>
          <text class='detail-text'>ISBN:{{item.book_isbn}}</text>
          <text class='detail-text'>{{item.condition}}</text>
        </view>
      </view>
    </view>
  </view>


<view class="message-page">
  <scroll-view class="message-list" scroll-y="true" id="message-list" enhanced="true">
    <block wx:for="{{messages}}" wx:key="index" class="message-block">
      <view class="message-wrapper">
        <!-- Ëá™Â∑±ÁöÑÂ§¥ÂÉèÂíåÊ∂àÊÅØ -->
        <view wx:if="{{item.from === myId}}" class="message-mine">
          <view class="message-content message-content-mine">
            <!-- Ê†πÊçÆÊ∂àÊÅØÁ±ªÂûãÊòæÁ§∫‰∏çÂêåÂÜÖÂÆπ -->
            <block wx:if="{{item.type === 'image'}}">
              <image class="message-image" src="{{item.content}}" mode="widthFix" bindtap="previewImage" data-url="{{item.content}}"></image>
            </block>
            <block wx:else>
              <text class="message-text">{{item.content}}</text>
            </block>
          </view>
          <image class="avatar avatar-mine" src="cloud://tx-5gi1emj7c6a1ff3f.7478-tx-5gi1emj7c6a1ff3f-1317385835/avatarUrl/{{item.from}}.png" mode="aspectFill">
          </image>
        </view>

        <!-- ÂØπÊñπÁöÑÊ∂àÊÅØÂíåÂ§¥ÂÉè -->
        <view wx:else class="message-other">
          <image class="avatar avatar-other" src="cloud://tx-5gi1emj7c6a1ff3f.7478-tx-5gi1emj7c6a1ff3f-1317385835/avatarUrl/{{item.from}}.png" mode="aspectFill">
          </image>
          <view class="message-content message-content-other">
            <block wx:if="{{item.type === 'image'}}">
              <lazy-image custom-class="message-image" src="{{item.content}}" mode="widthFix" bindtap="previewImage" data-url="{{item.content}}"/>
            </block>
            <block wx:else>
              <text class="message-text">{{item.content}}</text>
            </block>
          </view>
        </view>
      </view>
    </block>
  </scroll-view>

  <view class="message-input-area">
    <view class="toolbox-mask {{showToolbox ? 'mask-show' : ''}}" bindtap="hideToolbox"></view>

    <view class="message-toolbar">
      <view class="toolbar-item" bindtap="toggleToolbox">
        <text class="iconfont">+</text>
      </view>
      <input class="message-input-field" type="text" value="{{inputValue}}" placeholder="ËæìÂÖ•Ê∂àÊÅØ" bindinput="onInputChange" confirm-type="send" bindconfirm="sendMessage" />
      <button class="send-btn" bindtap="sendMessage">ÂèëÈÄÅ</button>
    </view>

    <!-- Â∑•ÂÖ∑ÁÆ±Èù¢Êùø -->
    <view class="toolbox {{showToolbox ? 'toolbox-show' : ''}}">
      <view class="toolbox-item" bindtap="chooseImage" data-source="camera">
        <view class="toolbox-icon">üì∏</view>
        <view class="toolbox-text">ÊãçÁÖß</view>
      </view>
      <view class="toolbox-item" bindtap="chooseImage" data-source="album">
        <view class="toolbox-icon">üñºÔ∏è</view>
        <view class="toolbox-text">Áõ∏ÂÜå</view>
      </view>
    </view>
  </view>
</view>